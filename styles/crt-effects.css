/* ── Text Glow ───────────────────────────────────────── */
#terminal-output,
.input-mirror,
.menu-btn,
.cursor {
  text-shadow: 0 0 5px rgba(0, 255, 65, 0.6);
}

/* ── Scanlines ───────────────────────────────────────── */
.crt-screen::before {
  content: '';
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.05) 2px,
    rgba(0, 0, 0, 0.05) 4px
  );
  pointer-events: none;
  z-index: 10;
}

/* ── Vignette ────────────────────────────────────────── */
.crt-screen::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(
    ellipse at center,
    transparent 50%,
    rgba(0, 0, 0, 0.4) 100%
  );
  pointer-events: none;
  z-index: 11;
}

/* ── Screen Curvature (desktop only) ─────────────────── */
@media (min-width: 769px) {
  .crt-screen {
    box-shadow:
      inset 0 0 60px rgba(0, 255, 65, 0.03),
      0 0 20px rgba(0, 255, 65, 0.05);
    border: 1px solid rgba(0, 255, 65, 0.08);
  }
}

/* ── Flicker ─────────────────────────────────────────── */
.crt-screen {
  animation: flicker 4s infinite;
}

@keyframes flicker {
  0%, 100% { opacity: 1; }
  3%       { opacity: 0.97; }
  6%       { opacity: 1; }
  42%      { opacity: 0.98; }
  44%      { opacity: 1; }
  82%      { opacity: 0.97; }
  84%      { opacity: 1; }
}

/* ── Glitch Transition ───────────────────────────────── */
.glitch-active {
  animation: glitch 300ms linear;
}

@keyframes glitch {
  0% {
    clip-path: inset(0 0 0 0);
    transform: translate(0);
  }
  20% {
    clip-path: inset(10% 0 60% 0);
    transform: translate(-4px, 2px);
  }
  40% {
    clip-path: inset(40% 0 20% 0);
    transform: translate(4px, -2px);
  }
  60% {
    clip-path: inset(70% 0 5% 0);
    transform: translate(-2px, 1px);
  }
  80% {
    clip-path: inset(20% 0 50% 0);
    transform: translate(2px, -1px);
  }
  100% {
    clip-path: inset(0 0 0 0);
    transform: translate(0);
  }
}

/* ── Boot sequence fast-scroll effect ────────────────── */
.boot-text {
  color: var(--fg-dim);
  line-height: 1.3;
}

.boot-text .highlight {
  color: var(--fg);
}

/* ── Reduced Motion: disable all CRT effects ─────────── */
@media (prefers-reduced-motion: reduce) {
  .crt-screen {
    animation: none;
  }

  .crt-screen::before,
  .crt-screen::after {
    display: none;
  }

  .glitch-active {
    animation: none;
  }

  #terminal-output,
  .input-mirror,
  .menu-btn,
  .cursor {
    text-shadow: none;
  }
}
